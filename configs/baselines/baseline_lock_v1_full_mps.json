{
  "schema_version": 1,
  "lock_tag": "v1_full_mps",
  "created_utc": "2026-02-12T18:33:02Z",
  "host": "MacBook-Pro-Gracjan.local",
  "user": "gracjanziemianski",
  "source_report": {
    "path": "/Users/gracjanziemianski/Documents/CPC-SNN-GravitationalWavesDetection/reports/baseline_report_v1_full_mps.json",
    "exists": true,
    "size_bytes": 5645,
    "sha256": "aa0a19a687f6a48783fb4cc2159b9d41a69d513c79eead8ebca2bdd349b20672"
  },
  "source_decision": {
    "path": "/Users/gracjanziemianski/Documents/CPC-SNN-GravitationalWavesDetection/configs/decisions/final_decision_candidate_v4_mps.json",
    "exists": true,
    "size_bytes": 2312,
    "sha256": "2ce7006c5d9aabf3776c1892ef6802a56d0d3a512dc23604a9b706a86df6b68c"
  },
  "source_report_runtime": {
    "device": "mps",
    "batch_size": 16,
    "max_id_noise": 0,
    "max_id_signal": 0,
    "max_ood_noise": 0,
    "max_ood_signal": 0,
    "latency_warmup_batches": 30,
    "latency_measure_batches": 200,
    "fit_temp_id": true,
    "fit_temp_ood": true,
    "seed": 123
  },
  "source_report_protocol_tag": "candidate_v4_mps_bestkpi",
  "source_report_task": "baseline_freeze_v0",
  "primary_kpi": "TPR@1e-4",
  "primary_metrics_snapshot": {
    "id_baseline": {
      "tpr_at_1e-4": 0.8396078431372549,
      "threshold_at_1e-4": 0.9942153096199036,
      "actual_fpr_at_1e-4": 0.00019603999215840032,
      "pauc_norm_max_fpr_1e-4": 0.9197999115642057,
      "ece_15bins": 0.007287383901404285,
      "brier": 0.004910235251389644,
      "sample_latency_ms_p95": 0.8046963506785686
    },
    "ood_baseline": {
      "tpr_at_1e-4": 0.8211764705882353,
      "threshold_at_1e-4": 0.9967702627182007,
      "actual_fpr_at_1e-4": 0.0001044932079414838,
      "pauc_norm_max_fpr_1e-4": 0.9010559661918802,
      "ece_15bins": 0.0019159720736926585,
      "brier": 0.002438836847028408,
      "sample_latency_ms_p95": 3.585449239108129
    }
  },
  "checkpoints": [
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v1/best.pt",
      "exists": true,
      "size_bytes": 7567903,
      "sha256": "2a39b2c0da5fd242fe55b7ef28c8af229f7dcae30c8433032ee009b00668b9d5"
    },
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed41/best.pt",
      "exists": true,
      "size_bytes": 7567903,
      "sha256": "340e99b84d6d310d0ff6a480dc8e7c92d58fb9309ae5a9a413427f5ffa1dacaa"
    },
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed42/best.pt",
      "exists": true,
      "size_bytes": 7567903,
      "sha256": "960185609b3701c45b1dbc6134fd53bf8cb9f81866c3ec39b5c58157f50b3882"
    },
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed44/best.pt",
      "exists": true,
      "size_bytes": 7567903,
      "sha256": "cad0d544e866a41c36cb5ad138ca338bcd19a972d4d5dce9cfc2e91d0384b255"
    },
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed45/best.pt",
      "exists": true,
      "size_bytes": 7567903,
      "sha256": "546afcd947297f885091d009fe1357f05ecc8540ee9ccb483bdbaa65d3aaf611"
    },
    {
      "path": "checkpoints/phase2_tf2d_tail_hn_v4_mps_seed46/best_kpi.pt",
      "exists": true,
      "size_bytes": 7576911,
      "sha256": "ba1be16bede4c761dd3586b1881ce5bacb1cb6daa4f73344a13d203df8983141"
    }
  ],
  "decision_snapshot": {
    "date": "2026-02-09",
    "primary_kpi": "TPR@1e-4",
    "id_candidate": {
      "variant": "C (phase2_tf2d_tail_hn_v1)",
      "checkpoint": "checkpoints/phase2_tf2d_tail_hn_v1/best.pt"
    },
    "ood_candidate": {
      "variant": "C3 ensemble (5 checkpoints, drop43_add46)",
      "checkpoints": [
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed41/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed42/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed44/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed45/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v4_mps_seed46/best_kpi.pt"
      ],
      "ood_compare_report_dir": "reports/ood_compare_b_vs_c3ens_drop43_add46"
    },
    "ood_ensemble_candidate": {
      "variant": "C3 ensemble (5 checkpoints, drop43_add46)",
      "checkpoints": [
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed41/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed42/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed44/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v3_boost5_seed45/best.pt",
        "checkpoints/phase2_tf2d_tail_hn_v4_mps_seed46/best_kpi.pt"
      ]
    },
    "strict_ood_snapshot": {
      "B": {
        "variant": "B: TF2D + tail-aware",
        "tpr_at_1e3": 0.9457,
        "tpr_at_1e4": 0.7422,
        "tpr_at_1e5": null,
        "evt_tpr_at_1e4": 0.8416
      },
      "C3_single": {
        "variant": "C3: TF2D + hard-negatives (boost=5)",
        "tpr_at_1e3": 0.9477,
        "tpr_at_1e4": 0.8619,
        "tpr_at_1e5": null,
        "evt_tpr_at_1e4": 0.0055
      },
      "C3_ensemble": {
        "variant": "C3 ensemble (5 checkpoints, drop43_add46)",
        "tpr_at_1e3": 0.9282,
        "tpr_at_1e4": 0.7806,
        "tpr_at_1e5": null,
        "evt_tpr_at_1e4": 0.6604
      }
    },
    "ood_head_to_head_repeats": {
      "protocol": "swapped_pairs, swaps=30, repeats=5, test_late",
      "B_single": {
        "mean_tpr_at_1e4": 0.2682,
        "std_tpr_at_1e4": 0.0204
      },
      "C3_ensemble_drop43_add46": {
        "mean_tpr_at_1e4": 0.7947,
        "std_tpr_at_1e4": 0.0146
      },
      "delta_ensemble_minus_B": 0.5264
    },
    "notes": [
      "OOD-primary candidate is C3 ensemble (drop43_add46).",
      "Use uncalibrated scores for thresholding near FAR~1e-4.",
      "Use calibrated score for probability reporting / deeper-tail analysis."
    ]
  },
  "reproduce_command": "",
  "notes": "Promote v4 best_kpi candidate on MPS after strict gate pass."
}